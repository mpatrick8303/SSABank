<!DOCTYPE html>
<html>
	<head>
	<meta charset="ISO-8859-1">
	<title>SSA Bank</title>
	</head>
	<body>
	
		<section class="hidden" id="customer-list">
			<ul id ="ul-c">
			
			</ul>
			
			
		</section>	
		
		<section class="hidden" id="customer">
			<div id="cus"></div>
			<button id="show-accounts">Show</button>
		</section>
		
		<section class="hidden" id="accounts">
			<ul id="ul-a">
			
			</ul>
		</section>
		
		
		<script src="/jquery-3.1.0.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function()
			{
				$.getJSON("ssa-bank/customers",customers);
				
			});
			function customers(response)
			{
				for(let i = 0; i<response.length;i++)
				{
					$('#ul-c').append('<li id=\''+response[i].id+'\'>' + response[i].id + " " + response[i].firstName + " " + response[i].lastName  + '</li>')
					
					
				}
				
				$('#customer-list').show()
				
			}
			
			$('#ul-c').click(function(evt)
			{
				console.log(evt.target.id)
				$('#cus').empty()
				$.getJSON("ssa-bank/customers/" + $(evt.target).attr('id'), customer)
				

			});
			function customer(response)
			{
				$('#cus').append('<p>').attr('id',response.id).addClass("custClass").append(response.id + " " + response.firstName + " " + response.lastName)

				$('#customer-list').hide()
				$('#cus').show()
			}
			
			$('#show-accounts').click(function(evt)
					{
						console.log(document.getElementsByClassName('custClass')[0].id)
						$.getJSON("ssa-bank/customers/"+ document.getElementsByClassName('custClass')[0].id + "/accounts" , accounts)
						

					});
					function accounts(response)
					{
						$('#cus').append(response.id + " " + response.firstName + " " + response.lastName)
						$('#customer-list').hide()
						$('#cus').show()
					}
			
			
			
	
		
		</script>
	</body>
</html>